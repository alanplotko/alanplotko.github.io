{%- if page.url == '/' -%}
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js" integrity="sha512-Kef5sc7gfTacR7TZKelcrRs15ipf7+t+n7Zh6mKNJbmW+/RRdCW9nwfLn4YX0s2nO6Kv5Y2ChqgIakaC6PW09A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{%- endif -%}
{%- if page.layout == 'post' -%}
<script async type="text/javascript" src="/assets/js/comments.js"></script>
<script defer type="text/javascript" src="/assets/js/clap.js"></script>
{%- endif -%}
{%- if jekyll.environment == 'production' -%}
<script type="text/javascript">
    (function(e,t,n,i,s,a,c){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)}
    ;a=t.createElement(i);c=t.getElementsByTagName(i)[0];a.async=true;a.src=s
    ;c.parentNode.insertBefore(a,c)
    })(window,document,"galite","script","https://cdnjs.cloudflare.com/ajax/libs/ga-lite/2.1.0/ga-lite.min.js");
    galite('create', '{{ site.google_analytics }}', 'auto');
    galite('set', 'anonymizeIp', true);
    galite('send', 'pageview');
    window.addEventListener('unload', () => {
        galite('send', 'timing', 'JS Dependencies', 'unload');
    });
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register("{{ site.url }}/sw.js", {
                scope: "/"
            });
        });
    }
    {%- if page.url == '/' -%}
    window.addEventListener('DOMContentLoaded', (event) => {
        particlesJS.load("particles", "assets/json/particlesjs-config.json");
    });
    {%- endif -%}
</script>
{%- elsif site.serviceWorker -%}
<script type="text/javascript">
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register("{{ site.url }}/sw.js", {
                scope: "/"
            });
        });
    }
    {%- if page.url == '/' -%}
    window.addEventListener('DOMContentLoaded', (event) => {
        particlesJS.load("particles", "assets/json/particlesjs-config.json");
    });
    {%- endif -%}
</script>
{%- elsif page.url == '/' -%}
<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', (event) => {
        particlesJS.load("particles", "assets/json/particlesjs-config.json");
    });
</script>
{%- endif -%}